# üöÄ Guia de Configura√ß√£o - AVC Alerta

## Problemas com QR Code do Expo - Solu√ß√µes

### 1. Verificar Rede
```bash
# Verificar IP da m√°quina
ipconfig getifaddr en0  # macOS
hostname -I             # Linux
ipconfig               # Windows
```

### 2. Limpar Cache do Expo
```bash
cd frontend
npx expo start --clear
```

### 3. Usar T√∫nel (se rede n√£o funcionar)
```bash
cd frontend
npx expo start --tunnel
```

### 4. Verificar Firewall
- **Windows**: Desabilitar temporariamente o Windows Defender
- **macOS**: Sistema > Seguran√ßa > Firewall > Permitir Expo
- **Linux**: `sudo ufw allow 8081`

## üî• Configura√ß√£o do Firebase

### 1. Criar Projeto
1. Acesse [Firebase Console](https://console.firebase.google.com/)
2. Clique em "Adicionar projeto"
3. Nome: `avc-alerta-app`
4. Desabilite Google Analytics (opcional)

### 2. Configurar Authentication
1. No console, v√° em "Authentication"
2. Clique em "Come√ßar"
3. Aba "Sign-in method"
4. Habilite "Email/senha"

### 3. Configurar Firestore
1. V√° em "Firestore Database"
2. Clique em "Criar banco de dados"
3. Modo de teste (para desenvolvimento)
4. Escolha localiza√ß√£o (southamerica-east1 para Brasil)

### 4. Obter Credenciais
1. Configura√ß√µes do projeto (√≠cone engrenagem)
2. Aba "Contas de servi√ßo"
3. "Gerar nova chave privada"
4. Baixar arquivo JSON

### 5. Configurar Frontend
```bash
cd frontend
npm install firebase
```

Criar `frontend/config/firebase.ts`:
```typescript
import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';
import { getFirestore } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: "sua-api-key",
  authDomain: "avc-alerta-app.firebaseapp.com",
  projectId: "avc-alerta-app",
  storageBucket: "avc-alerta-app.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef"
};

const app = initializeApp(firebaseConfig);
export const auth = getAuth(app);
export const db = getFirestore(app);
```

## üóÑÔ∏è Alternativas de Banco de Dados

### 1. Firebase (Recomendado)
```bash
# J√° configurado acima
```

### 2. PlanetScale
```bash
# Instalar cliente
npm install @planetscale/database

# Configurar conex√£o
DATABASE_URL="mysql://username:password@host/database?sslaccept=strict"
```

### 3. Railway PostgreSQL
```bash
# Instalar depend√™ncias
npm install pg @types/pg

# String de conex√£o fornecida pelo Railway
DATABASE_URL="postgresql://user:password@host:port/database"
```

### 4. Neon PostgreSQL
```bash
# Mesmo setup do Railway
npm install pg @types/pg

# String de conex√£o do Neon
DATABASE_URL="postgresql://user:password@host/database?sslmode=require"
```

## üèÉ‚Äç‚ôÇÔ∏è Executar o Projeto

### 1. Backend
```bash
cd backend
npm install
cp .env.example .env
# Editar .env com suas configura√ß√µes
npm run dev
```

### 2. Frontend
```bash
cd frontend
npm install
npm run dev
```

### 3. Testar Conex√£o
1. Backend rodando em: `http://localhost:3000`
2. Teste: `curl http://localhost:3000/health`
3. Frontend: Escaneie QR code com Expo Go

## üîß Troubleshooting

### QR Code n√£o funciona
```bash
# Tentar com IP espec√≠fico
npx expo start --host 192.168.1.100

# Ou usar t√∫nel
npx expo start --tunnel

# Limpar cache
npx expo start --clear
```

### Erro de CORS
No backend, arquivo `.env`:
```env
CORS_ORIGINS=http://localhost:8081,exp://192.168.1.100:8081
```

### Firebase n√£o conecta
1. Verificar credenciais no `.env`
2. Confirmar se Firestore est√° habilitado
3. Verificar regras de seguran√ßa do Firestore

### Expo n√£o instala
```bash
# Atualizar Expo CLI
npm install -g @expo/cli@latest

# Ou usar npx
npx expo@latest start
```

## üì± Testar no Dispositivo

### Android
1. Instalar Expo Go na Play Store
2. Escanear QR code
3. Ou usar: `npx expo start --android`

### iOS
1. Instalar Expo Go na App Store
2. Escanear QR code com c√¢mera nativa
3. Ou usar: `npx expo start --ios`

## üöÄ Deploy

### Backend (Railway)
1. Conectar reposit√≥rio no Railway
2. Configurar vari√°veis de ambiente
3. Deploy autom√°tico

### Frontend (Netlify)
```bash
cd frontend
npx expo export --platform web
# Upload da pasta dist/ para Netlify
```

## üìû Suporte

Se ainda tiver problemas:
1. Verificar vers√µes do Node.js (18+)
2. Verificar vers√µes do Expo CLI
3. Tentar em rede diferente
4. Usar hotspot do celular
5. Verificar antiv√≠rus/firewall